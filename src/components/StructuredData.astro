---
interface Props {
	type?: 'article' | 'website' | 'organization';
	title: string;
	description: string;
	url: string;
	image: string;
	publishedTime?: string;
	modifiedTime?: string;
	author?: string;
	section?: string;
	tags?: string[];
}

const {
	type = 'website',
	title,
	description,
	url,
	image,
	publishedTime,
	modifiedTime,
	author,
	section,
	tags = []
} = Astro.props;

// Base organization schema
const organizationSchema = {
	"@context": "https://schema.org",
	"@type": "Organization",
	"name": "Field Notes on Humanity",
	"url": "https://fieldnotesonhumanity.com",
	"logo": "https://fieldnotesonhumanity.com/favicon.svg",
	"description": "A collection of observations, reflections, and frameworks exploring human experience, relationships, and contemporary life through various lenses of inquiry.",
	"sameAs": [
		// Add social media URLs when available
		// "https://twitter.com/fieldnotesonhumanity",
		// "https://linkedin.com/company/fieldnotesonhumanity"
	]
};

// Website schema
const websiteSchema = {
	"@context": "https://schema.org",
	"@type": "WebSite",
	"name": "Field Notes on Humanity",
	"url": "https://fieldnotesonhumanity.com",
	"description": "A collection of observations, reflections, and frameworks exploring human experience, relationships, and contemporary life through various lenses of inquiry.",
	"publisher": {
		"@type": "Organization",
		"name": "Field Notes on Humanity"
	},
	"potentialAction": {
		"@type": "SearchAction",
		"target": "https://fieldnotesonhumanity.com/writings?search={search_term_string}",
		"query-input": "required name=search_term_string"
	}
};

// Article schema
const articleSchema = type === 'article' ? {
	"@context": "https://schema.org",
	"@type": "Article",
	"headline": title,
	"description": description,
	"image": image,
	"url": url,
	"datePublished": publishedTime,
	"dateModified": modifiedTime || publishedTime,
	"author": {
		"@type": "Person",
		"name": author || "Field Notes on Humanity"
	},
	"publisher": {
		"@type": "Organization",
		"name": "Field Notes on Humanity",
		"logo": {
			"@type": "ImageObject",
			"url": "https://fieldnotesonhumanity.com/favicon.svg"
		}
	},
	"mainEntityOfPage": {
		"@type": "WebPage",
		"@id": url
	},
	"articleSection": section,
	"keywords": tags.join(', '),
	"inLanguage": "en-US"
} : null;

// Breadcrumb schema
const breadcrumbSchema = {
	"@context": "https://schema.org",
	"@type": "BreadcrumbList",
	"itemListElement": [
		{
			"@type": "ListItem",
			"position": 1,
			"name": "Home",
			"item": "https://fieldnotesonhumanity.com"
		}
	]
};

// Add category to breadcrumb if available
if (section) {
	breadcrumbSchema.itemListElement.push({
		"@type": "ListItem",
		"position": 2,
		"name": section,
		"item": `https://fieldnotesonhumanity.com/${section.toLowerCase().replace(/\s+/g, '-')}`
	});
}

// Add current page to breadcrumb
breadcrumbSchema.itemListElement.push({
	"@type": "ListItem",
	"position": breadcrumbSchema.itemListElement.length + 1,
	"name": title,
	"item": url
});
---

<!-- Organization Schema -->
<script type="application/ld+json" set:html={JSON.stringify(organizationSchema)}></script>

<!-- Website Schema -->
<script type="application/ld+json" set:html={JSON.stringify(websiteSchema)}></script>

<!-- Article Schema (if applicable) -->
{articleSchema && (
	<script type="application/ld+json" set:html={JSON.stringify(articleSchema)}></script>
)}

<!-- Breadcrumb Schema -->
<script type="application/ld+json" set:html={JSON.stringify(breadcrumbSchema)}></script>
